<!-- app/views/two_factor_authentications/show.html.erb -->
<div class="flex flex-col items-center px-6 pt-8 mx-auto md:h-screen lg:mt-0 dark:bg-gray-900">
  <div class="w-full max-w-xl p-6 space-y-8 sm:p-8 bg-white rounded-lg shadow dark:bg-gray-800">
    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Two-Factor Authentication Setup</h2>

    <% if current_user.otp_required_for_login %>
      <p class="text-gray-900 dark:text-white">Two-Factor Authentication is currently enabled.</p>
      <%= button_to 'Disable Two-Factor Authentication', disable_two_factor_authentication_path, method: :post, class: 'btn btn-danger' %>
    <% else %>
      <p class="text-gray-900 dark:text-white">Scan this QR code with your authentication app:</p>
      <div class="mb-4">
        <%= raw @qr_code %>
      </div>

      <%= form_with url: enable_two_factor_authentication_path, method: :post, local: true do |f| %>
        <div class="mb-4">
          <%= f.label :otp_code, 'Enter the code from your app', class: 'block text-sm font-medium text-gray-900 dark:text-gray-300' %>
          <%= f.text_field :otp_code, class: 'mt-1 block w-full rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-gray-300' %>
        </div>
        <div>
          <%= f.submit 'Enable Two-Factor Authentication', class: 'btn btn-primary' %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

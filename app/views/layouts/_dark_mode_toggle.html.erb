<script>
    document.addEventListener('DOMContentLoaded', function () {
      var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
      var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
      var themeToggleBtn = document.getElementById('theme-toggle');

      function setThemeFromLocalStorage() {
        var storedTheme = localStorage.getItem('color-theme');

        // Default to dark mode if no preference is stored
        if (!storedTheme) {
          document.documentElement.classList.add('dark');
          themeToggleLightIcon.classList.remove('hidden');
          themeToggleDarkIcon.classList.add('hidden');
          localStorage.setItem('color-theme', 'dark'); // Save default preference
          return;
        }

        // Apply stored theme
        if (storedTheme === 'dark') {
          themeToggleLightIcon.classList.remove('hidden');
          themeToggleDarkIcon.classList.add('hidden');
          document.documentElement.classList.add('dark');
        } else {
          themeToggleDarkIcon.classList.remove('hidden');
          themeToggleLightIcon.classList.add('hidden');
          document.documentElement.classList.remove('dark');
        }
      }

      setThemeFromLocalStorage(); // Set theme on page load

      themeToggleBtn.addEventListener('click', function () {
        var isDarkMode = document.documentElement.classList.contains('dark');
        document.documentElement.classList.toggle('dark');
        themeToggleDarkIcon.classList.toggle('hidden');
        themeToggleLightIcon.classList.toggle('hidden');
        localStorage.setItem('color-theme', isDarkMode ? 'light' : 'dark');
      });
    });
</script>